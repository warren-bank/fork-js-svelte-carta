import { sveltekit } from '@sveltejs/kit/vite';
import { defineConfig } from 'vite';

export default defineConfig({
  plugins: [sveltekit()],

  define: {
    __ENABLE_CARTA_SSR_ASYNC_PLUGINS__ : 'true',
    __ENABLE_CARTA_SSR_HIGHLIGHTER__   : 'true'
  },

  /*
  ssr: {
    noExternal: [
      'carta-md/**'
    ]
  },
  */

  server: {
    host: '0.0.0.0',
    fs: {
      allow: [
        '..',
        '../..',
        '../../..',
        '../../../..',
        '../../../../..',
        '../../../../../..',
        '../../../../../../..',
        '../../../../../../../..',
        '../../../../../../../../..',
        '../../../../../../../../../..',
        '../../../../../../../../../../..',
        '../../../../../../../../../../../..',
        '../../../../../../../../../../../../..',
        '../../../../../../../../../../../../../..',
        '../../../../../../../../../../../../../../..',
        '../../../../../../../../../../../../../../../..',
        '../../../../../../../../../../../../../../../../..',
        '../../../../../../../../../../../../../../../../../..',
        '../../../../../../../../../../../../../../../../../../..',
        '../../../../../../../../../../../../../../../../../../../..',
        '../../../../../../../../../../../../../../../../../../../../../../1-builds'
      ]
    }
  },

  build: {
    sourcemap: true
  }
});
