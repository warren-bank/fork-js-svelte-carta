import{g as r}from"./_commonjsHelpers-B_TGDw1j.js";import{w as t,s as e,h as n,v as o,r as a,S as s}from"./utils-BcjXZ87z-B87Hz1Kt.js";function u(r,o){const a=((r,o)=>{switch(r.nodeType){case 1:return((r,o)=>{const a=r.namespaceURI,s=a===t.svg?e:n,u=a===t.html?r.tagName.toLowerCase():r.tagName,c=a===t.html&&"template"===u?r.content:r,l=r.getAttributeNames(),f={};let v=-1;for(;++v<l.length;)f[l[v]]=r.getAttribute(l[v])||"";return s(u,f,i(c,o))})(r,o);case 3:return(r=>({type:"text",value:r.nodeValue||""}))(r);case 8:return(r=>({type:"comment",value:r.nodeValue||""}))(r);case 9:case 11:return function(r,t){return{type:"root",children:i(r,t)}}(r,o);case 10:return{type:"doctype"};default:return}})(r,o);return a&&o.afterTransform&&o.afterTransform(r,a),a}function i(r,t){const e=r.childNodes,n=[];let o=-1;for(;++o<e.length;){const r=u(e[o],t);void 0!==r&&n.push(r)}return n}var c,l,f={exports:{}},v={exports:{}};c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v.exports=l={rotl:(r,t)=>r<<t|r>>>32-t,rotr:(r,t)=>r<<32-t|r>>>t,endian(r){if(r.constructor==Number)return 16711935&l.rotl(r,8)|4278255360&l.rotl(r,24);for(var t=0;r.length>t;t++)r[t]=l.endian(r[t]);return r},randomBytes(r){for(var t=[];r>0;r--)t.push(Math.floor(256*Math.random()));return t},bytesToWords(r){for(var t=[],e=0,n=0;r.length>e;e++,n+=8)t[n>>>5]|=r[e]<<24-n%32;return t},wordsToBytes(r){for(var t=[],e=0;32*r.length>e;e+=8)t.push(r[e>>>5]>>>24-e%32&255);return t},bytesToHex(r){for(var t=[],e=0;r.length>e;e++)t.push((r[e]>>>4).toString(16)),t.push((15&r[e]).toString(16));return t.join("")},hexToBytes(r){for(var t=[],e=0;r.length>e;e+=2)t.push(parseInt(r.substr(e,2),16));return t},bytesToBase64(r){for(var t=[],e=0;r.length>e;e+=3)for(var n=r[e]<<16|r[e+1]<<8|r[e+2],o=0;4>o;o++)t.push(8*e+6*o>8*r.length?"=":c.charAt(n>>>6*(3-o)&63));return t.join("")},base64ToBytes(r){r=r.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],e=0,n=0;r.length>e;n=++e%4)0!=n&&t.push((c.indexOf(r.charAt(e-1))&Math.pow(2,-2*n+8)-1)<<2*n|c.indexOf(r.charAt(e))>>>6-2*n);return t}};var d=v.exports,p={utf8:{stringToBytes(r){return p.bin.stringToBytes(unescape(encodeURIComponent(r)))},bytesToString(r){return decodeURIComponent(escape(p.bin.bytesToString(r)))}},bin:{stringToBytes(r){for(var t=[],e=0;r.length>e;e++)t.push(255&r.charCodeAt(e));return t},bytesToString(r){for(var t=[],e=0;r.length>e;e++)t.push(String.fromCharCode(r[e]));return t.join("")}}},y=p,m=r=>null!=r&&(g(r)||(r=>"function"==typeof r.readFloatLE&&"function"==typeof r.slice&&g(r.slice(0,0)))(r)||!!r._isBuffer);function g(r){return!!r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r)}(()=>{var r=d,t=y.utf8,e=m,n=y.bin,o=(a,s)=>{a.constructor==String?a=s&&"binary"===s.encoding?n.stringToBytes(a):t.stringToBytes(a):e(a)?a=[].slice.call(a,0):Array.isArray(a)||a.constructor===Uint8Array||(a=""+a);for(var u=r.bytesToWords(a),i=8*a.length,c=1732584193,l=-271733879,f=-1732584194,v=271733878,d=0;u.length>d;d++)u[d]=16711935&(u[d]<<8|u[d]>>>24)|4278255360&(u[d]<<24|u[d]>>>8);u[i>>>5]|=128<<i%32,u[14+(i+64>>>9<<4)]=i;var p=o._ff,y=o._gg,m=o._hh,g=o._ii;for(d=0;u.length>d;d+=16){var T=c,b=l,h=f,z=v;c=p(c,l,f,v,u[d+0],7,-680876936),v=p(v,c,l,f,u[d+1],12,-389564586),f=p(f,v,c,l,u[d+2],17,606105819),l=p(l,f,v,c,u[d+3],22,-1044525330),c=p(c,l,f,v,u[d+4],7,-176418897),v=p(v,c,l,f,u[d+5],12,1200080426),f=p(f,v,c,l,u[d+6],17,-1473231341),l=p(l,f,v,c,u[d+7],22,-45705983),c=p(c,l,f,v,u[d+8],7,1770035416),v=p(v,c,l,f,u[d+9],12,-1958414417),f=p(f,v,c,l,u[d+10],17,-42063),l=p(l,f,v,c,u[d+11],22,-1990404162),c=p(c,l,f,v,u[d+12],7,1804603682),v=p(v,c,l,f,u[d+13],12,-40341101),f=p(f,v,c,l,u[d+14],17,-1502002290),c=y(c,l=p(l,f,v,c,u[d+15],22,1236535329),f,v,u[d+1],5,-165796510),v=y(v,c,l,f,u[d+6],9,-1069501632),f=y(f,v,c,l,u[d+11],14,643717713),l=y(l,f,v,c,u[d+0],20,-373897302),c=y(c,l,f,v,u[d+5],5,-701558691),v=y(v,c,l,f,u[d+10],9,38016083),f=y(f,v,c,l,u[d+15],14,-660478335),l=y(l,f,v,c,u[d+4],20,-405537848),c=y(c,l,f,v,u[d+9],5,568446438),v=y(v,c,l,f,u[d+14],9,-1019803690),f=y(f,v,c,l,u[d+3],14,-187363961),l=y(l,f,v,c,u[d+8],20,1163531501),c=y(c,l,f,v,u[d+13],5,-1444681467),v=y(v,c,l,f,u[d+2],9,-51403784),f=y(f,v,c,l,u[d+7],14,1735328473),c=m(c,l=y(l,f,v,c,u[d+12],20,-1926607734),f,v,u[d+5],4,-378558),v=m(v,c,l,f,u[d+8],11,-2022574463),f=m(f,v,c,l,u[d+11],16,1839030562),l=m(l,f,v,c,u[d+14],23,-35309556),c=m(c,l,f,v,u[d+1],4,-1530992060),v=m(v,c,l,f,u[d+4],11,1272893353),f=m(f,v,c,l,u[d+7],16,-155497632),l=m(l,f,v,c,u[d+10],23,-1094730640),c=m(c,l,f,v,u[d+13],4,681279174),v=m(v,c,l,f,u[d+0],11,-358537222),f=m(f,v,c,l,u[d+3],16,-722521979),l=m(l,f,v,c,u[d+6],23,76029189),c=m(c,l,f,v,u[d+9],4,-640364487),v=m(v,c,l,f,u[d+12],11,-421815835),f=m(f,v,c,l,u[d+15],16,530742520),c=g(c,l=m(l,f,v,c,u[d+2],23,-995338651),f,v,u[d+0],6,-198630844),v=g(v,c,l,f,u[d+7],10,1126891415),f=g(f,v,c,l,u[d+14],15,-1416354905),l=g(l,f,v,c,u[d+5],21,-57434055),c=g(c,l,f,v,u[d+12],6,1700485571),v=g(v,c,l,f,u[d+3],10,-1894986606),f=g(f,v,c,l,u[d+10],15,-1051523),l=g(l,f,v,c,u[d+1],21,-2054922799),c=g(c,l,f,v,u[d+8],6,1873313359),v=g(v,c,l,f,u[d+15],10,-30611744),f=g(f,v,c,l,u[d+6],15,-1560198380),l=g(l,f,v,c,u[d+13],21,1309151649),c=g(c,l,f,v,u[d+4],6,-145523070),v=g(v,c,l,f,u[d+11],10,-1120210379),f=g(f,v,c,l,u[d+2],15,718787259),l=g(l,f,v,c,u[d+9],21,-343485551),c=c+T>>>0,l=l+b>>>0,f=f+h>>>0,v=v+z>>>0}return r.endian([c,l,f,v])};o._ff=(r,t,e,n,o,a,s)=>{var u=r+(t&e|~t&n)+(o>>>0)+s;return(u<<a|u>>>32-a)+t},o._gg=(r,t,e,n,o,a,s)=>{var u=r+(t&n|e&~n)+(o>>>0)+s;return(u<<a|u>>>32-a)+t},o._hh=(r,t,e,n,o,a,s)=>{var u=r+(t^e^n)+(o>>>0)+s;return(u<<a|u>>>32-a)+t},o._ii=(r,t,e,n,o,a,s)=>{var u=r+(e^(t|~n))+(o>>>0)+s;return(u<<a|u>>>32-a)+t},o._blocksize=16,o._digestsize=16,f.exports=(t,e)=>{if(null==t)throw Error("Illegal argument "+t);var a=r.wordsToBytes(o(t,e));return e&&e.asBytes?a:e&&e.asString?n.bytesToString(a):r.bytesToHex(a)}})();var T=r(f.exports);let b=0;const h=(r,t,e)=>o(r,((r,n,o)=>{if("element"!==r.type||"pre"!==r.tagName)return;const i=r.children.at(0);if(!i||"code"!==i.tagName||!i.properties.className||!i.properties.className.includes("language-tikz"))return;const c=a(i.children[0].value),l=document.createElement("div"),f=document.createElement("div"),v=document.createTextNode(c);l.classList.add("tikz-generated"),l.setAttribute("tikz-generation",""+b),((null==e?void 0:e.center)??1)&&l.setAttribute("align","center"),null!=e&&e.class&&l.classList.add(...e.class.split(" ")),f.setAttribute("type","tikzjax"),null!=e&&e.debug&&f.setAttribute("data-show-console","true"),f.appendChild(v);const d=T(JSON.stringify(f.dataset)+v.nodeValue);let p=globalThis.localStorage.getItem(d);p?(null!=e&&e.postProcessing&&(p=e.postProcessing(p)),l.innerHTML=p):l.appendChild(f),t.sanitizer&&(l.innerHTML=t.sanitizer(l.innerHTML));const y=u(l,{})||{type:"root",children:[]};return null==o||o.children.splice(n,1,y),[s,n]}));function z(r,t){var e;const n=null==(e=r.detail.carta.renderer)?void 0:e.container;n&&(b++,(r=>{Array.from(r.querySelectorAll(".tikz-generated[tikz-generation]")).filter((r=>+(r.getAttribute("tikz-generation")??-1)<b)).forEach((r=>r.remove()))})(n),(async r=>{if(null!=globalThis.tikzjax)return;globalThis.tikzjax=1;const t=`<script type="text/javascript" id="tikzjax">${(await import("./tikzjax-Bvw2IMTd-CE5KsNnm.js")).default}<\/script>`,e=document.createRange();e.selectNode(document.getElementsByTagName("body")[0]);const n=e.createContextualFragment(t);document.body.appendChild(n),document.addEventListener("tikzjax-load-finished",(t=>{const e=t.target;null!=r&&r.postProcessing&&(e.outerHTML=r.postProcessing(e.outerHTML))}))})(t))}export{h as browserTikzTransform,z as processTikzScripts};
